<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ivoplayx Chat</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/tmi.js@1.8.5"></script>
</head>
<body>
  <div id="chat"></div>

  <script>
    const client = new tmi.Client({
      channels: ['ivoplayx']
    });

    client.connect();

    client.on('message', (channel, tags, message, self) => {
      if (self) return;
      addMessage(tags['display-name'], message);
    });

    function addMessage(username, message) {
      const chat = document.getElementById('chat');
      const msgContainer = document.createElement('div');
      msgContainer.classList.add('message');

      const user = document.createElement('span');
      user.classList.add('username');
      user.textContent = username + ': ';

      const text = document.createElement('span');
      text.classList.add('text');
      text.textContent = message;

      msgContainer.appendChild(user);
      msgContainer.appendChild(text);
      chat.appendChild(msgContainer);

      // Alterna colores
      const messages = document.querySelectorAll('.message');
      messages.forEach((msg, i) => {
        msg.classList.toggle('alt', i % 2 === 0);
      });

      // Mantiene solo los últimos 20 mensajes
      if (chat.children.length > 20) {
        chat.removeChild(chat.firstChild);
      }

      // Scroll automático
      chat.scrollTop = chat.scrollHeight;
    }
  </script>
</body>
</html>

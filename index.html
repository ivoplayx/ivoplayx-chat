<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ivoplayx Chat</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/tmi.js@1.8.5/dist/tmi.min.js"></script>
</head>
<body>
  <div id="chat"></div>

  <script>
    // Conectar con Twitch
    const client = new tmi.Client({
      options: { debug: false },
      connection: { reconnect: true },
      channels: ['ivoplayx'] // cambia aquÃ­ si tu canal se llama distinto
    });

    client.connect();

    // Manejar mensajes
    client.on('message', (channel, tags, message, self) => {
      if (self) return;
      addMessage(tags['display-name'], message);
    });

    function addMessage(username, message) {
      const chat = document.getElementById('chat');
      const msgContainer = document.createElement('div');
      msgContainer.classList.add('message');

      // Alterna colores entre mensajes
      const index = chat.children.length % 2;
      msgContainer.classList.add(index === 0 ? 'dark' : 'darker');

      const user = document.createElement('span');
      user.classList.add('username');
      user.textContent = username + ': ';

      const text = document.createElement('span');
      text.classList.add('text');
      text.textContent = message;

      msgContainer.appendChild(user);
      msgContainer.appendChild(text);
      chat.appendChild(msgContainer);

      // Limitar a 20 mensajes
      if (chat.children.length > 20) {
        chat.removeChild(chat.firstChild);
      }

      // Auto scroll
      chat.scrollTop = chat.scrollHeight;
    }
  </script>
</body>
</html>
